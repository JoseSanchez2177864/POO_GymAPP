<CRUDpp>:
    FloatLayout:
        md_bg_color: 0.05, 0.05, 0.05, 1

        MDLabel:
            text: "CRUD de Planes"
            font_size: "24sp"
            halign: "center"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            bold: True
            pos_hint: {"center_y": 0.95}

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 0.9, 0.75
            pos_hint: {"center_x": 0.5, "center_y": 0.55}
            spacing: dp(10)
            padding: dp(10)
            md_bg_color: 0.15, 0.15, 0.15, 1
            radius: [15, 15, 15, 15]

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True

                MDBoxLayout:
                    id: label_container
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(10)
                    padding: dp(10), dp(10), dp(10), dp(10)  # padding inferior reducido
                    md_bg_color: 0.1, 0.1, 0.1, 1
                    radius: [10, 10, 10, 10]

        # Botón fuera del ScrollView, sobre el FloatLayout y por encima del separador
        MDRaisedButton:
            text: "Agregar Planes"
            size_hint: None, None
            size: dp(150), dp(50)
            pos_hint: {"center_x": 0.5, "y": 0.13}  # Posición ajustada justo arriba del separador
            md_bg_color: 0.2, 0.6, 0.2, 1
            on_release: root.mostrar_popup_agregar()

        # Separador
        MDSeparator:
            height: dp(1)
            md_bg_color: 0.4, 0.4, 0.4, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.11}

        # Barra inferior de iconos
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            padding: dp(10), 0
            spacing: dp(10)
            pos_hint: {"center_x": 0.5, "y": 0.02}

            MDIconButton:
                icon: "home"
                user_font_size: "24sp"
                md_bg_color: 0.8, 0.1, 0.1, 1
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                on_release: app.root.current = 'pantalla3'

            MDIconButton:
                icon: "clipboard-list"
                user_font_size: "24sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                md_bg_color: 0.8, 0.1, 0.1, 1
                on_release: root.redirigir_por_rol()

            Widget:
                size_hint_x: 0.5

            MDIconButton:
                icon: "plus"
                user_font_size: "24sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                md_bg_color: 0.8, 0.1, 0.1, 1
                on_release: app.root.current = 'pantalla11'

            Widget:
                size_hint_x: 0.5

            MDIconButton:
                icon: "chart-bar"
                user_font_size: "24sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                md_bg_color: 0.8, 0.1, 0.1, 1
                on_release: app.redirigir_por_rol2()

            MDIconButton:
                icon: "account"
                user_font_size: "24sp"
                md_bg_color: 0.8, 0.1, 0.1, 1
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                on_release: app.root.current = 'pantalla5'
